// Generated by CoffeeScript 1.7.1
(function() {
  var B, M, app, handler, router, tpl;

  require('zepto');

  B = require('backbone');

  M = require('backbone.marionette');

  B.$ = M.$ = $;

  handler = require('./handler');

  tpl = require('./tpl');

  router = M.AppRouter.extend({
    controller: handler,
    appRoutes: {
      'login': 'login',
      'register': 'register',
      '*default': 'default'
    }
  });

  app = new M.Application();

  app.on('initialize:before', function() {
    return $('#wrap').append($(tpl.base()));
  });

  app.on('initialize:after', function() {
    var R;
    R = new router();
    B.history.start({
      pushState: true,
      root: '/'
    });
    return $(document).on('click', 'a[href^="/"]', function(e) {
      e.preventDefault();
      return R.navigate($(e.currentTarget).attr('href').substr(1), {
        trigger: true
      });
    });
  });

  module.exports = app;

}).call(this);

//# sourceMappingURL=index.map
